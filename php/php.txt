安装
sudo apt-get install apt-transport-https lsb-release ca-certificates

sudo wget -O /etc/apt/trusted.gpg.d/php.gpg https://packages.sury.org/php/apt.gpg

sudo echo "deb https://packages.sury.org/php/ $(lsb_release -sc) main" > /etc/apt/sources.list.d/php.list

sudo apt-get update


sudo apt-get install php7.1


安装其他
#添加php源
sudo add-apt-repository ppa:ondrej/php
sudo apt-get update

php的一些包
sudo apt-get -y install php7.1-mysql php7.1-fpm php7.1-dev php7.1-xml php-pear

pecl install mongodb
##在php.ini中添加:extension=mongodb.so
sudo gedit /etc/php/7.1/fpm/php.ini
sudo gedit /etc/php/7.1/cli/php.ini

打开注释，cgi.fix_pathinfo=1 改为 cgi.fix_pathinfo=0
##重启php-fpm
service php7.1-fpm restart






再php中使用mongodb失败，怀疑没装对地方


切换PHP版本
sudo update-alternatives --config php

再装一次
sudo pecl install mongodb

重启php
service php7.1-fpm restart



如果ok，在phpinfo里面可以搜到mongodb